import{r as n,l as _,o as B,m as E,p as N,h as $,c as a,g as i,b as s,a as y,F as M,i as W,q as h,j as q,d as D,w as F,s as S,v as U,T as j}from"./index-7hryvcrj.js";import{t as A,i as H}from"./ChungShan-IxIyL9YM.js";const I=["onClick","innerHTML"],G={key:0,class:"relative group flex-shrink-0"},J={class:"absolute z-10 top-7 left-1 bg-white shadow rounded hidden group-hover:block"},K=["onClick","innerHTML"],R={__name:"HeaderTabs",emits:["update:visibilityTab","update:keyword"],setup(O,{emit:V}){const m=n(A),o=n(m.value[0].value),d=n(!1),r=n(""),v=n(null),g=n(null),w=n([]),b=n([]),T=V;_(o,l=>{T("update:visibilityTab",l)}),_(r,l=>{T("update:keyword",l)});const k=()=>{if(!v.value||!g.value)return;const l=v.value.parentNode;if(!l)return;const e=l.clientWidth-g.value.offsetWidth-20,t=350;let u=0;const c=[],f=[],C=v.value.querySelectorAll("li:not(.relative)");if(C.forEach((p,z)=>{const x=m.value[z];if(!x)return;const L=p.offsetWidth;u+L<e-t?(u+=L,c.push(x)):f.push(x)}),f.length===1){const p=C[c.length];p&&u+p.offsetWidth<e&&c.push(f.shift())}w.value=c,b.value=f};return B(()=>{w.value=[...m.value],E(()=>{k(),window.addEventListener("resize",k)})}),N(()=>{window.removeEventListener("resize",k)}),$(()=>{let l=H;return o.value!==0&&(l=H.filter(e=>e.type*1===o.value)),r.value.trim()!==""&&(l=l.filter(e=>e.title.toLowerCase().includes(r.value.trim().toLowerCase()))),l}),(l,e)=>(i(),a("div",null,[s("ul",{ref_key:"tabContainer",ref:v,class:"w-full flex flex-row items-center gap-5 h-10 flex-grow text-xl"},[(i(!0),a(M,null,W(w.value,t=>(i(),a("li",{key:t.value,class:"flex-shrink-0 h-full flex items-center"},[s("a",{href:"",class:q([{active:o.value===t.value},"hover:bg-green-200 rounded p-2 px-3 whitespace-nowrap"]),onClick:h(u=>o.value=t.value,["prevent"]),innerHTML:t.title},null,10,I)]))),128)),b.value.length?(i(),a("li",G,[s("a",{href:"#",onClick:e[0]||(e[0]=h(()=>{},["prevent"])),class:"h-full cursor-pointer hover:bg-green-200 rounded p-2 px-3"},"更多 ▾"),s("ul",J,[(i(!0),a(M,null,W(b.value,t=>(i(),a("li",{key:t.value},[s("a",{href:"",class:"block px-4 py-2 bg-gray-100 hover:bg-green-200 whitespace-nowrap rounded",onClick:h(u=>o.value=t.value,["prevent"]),innerHTML:t.title},null,8,K)]))),128))])])):y("",!0)],512),s("div",{ref_key:"rightTools",ref:g,class:"relative flex items-center"},[s("button",{onClick:e[1]||(e[1]=t=>d.value=!d.value),class:"p-2"},[...e[4]||(e[4]=[s("i",{class:"fa-solid fa-magnifying-glass text-2xl"},null,-1)])]),D(j,{name:"fade"},{default:F(()=>[d.value?S((i(),a("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),type:"text",placeholder:"搜尋標題...",class:"border rounded px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400 transition w-40"},null,512)),[[U,r.value]]):y("",!0)]),_:1}),d.value&r.value.length?(i(),a("a",{key:0,href:"#",class:"absolute right-2",onClick:e[3]||(e[3]=h(t=>r.value="",["prevent"]))},[...e[5]||(e[5]=[s("i",{class:"fa-solid fa-xmark text-gray-400"},null,-1)])])):y("",!0)],512)]))}};export{R as _};
