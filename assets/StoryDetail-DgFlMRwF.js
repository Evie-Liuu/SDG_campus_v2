import{r as _,h as w,c as o,b as e,d as y,w as S,e as C,f as D,t as l,F as g,i as p,n as j,s as U,v as G,g as n,u as B,j as m}from"./index-nh5eAeLI.js";import{i as L,t as N}from"./ChungShan-IxIyL9YM.js";const V="/SDG_campus_v2/assets/CS-B4U9TKzs.jpg",z="/SDG_campus_v2/assets/CS_map_Filled-CW6tij6-.png",F="/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",I="/SDG_campus_v2/assets/data-bg-CN9u9Li9.jpg",T="/SDG_campus_v2/assets/owl-body-uleOgCxU.png",$="/SDG_campus_v2/assets/sdgs-bg-m_h1VVFS.jpg",P="/SDG_campus_v2/assets/sign-Ddj-MgxW.png",A="/SDG_campus_v2/assets/story-bg-Cvn6PwaJ.webp",M={class:"pt-30 max-w-4xl mx-auto p-4"},O={class:"absolute z-10 left-50 top-30 flex flex-col text-2xl"},R={key:0,class:"animate-fade-in-up flex flex-col gap-8"},W={class:"relative z-10 text-white"},E={class:"text-4xl font-bold mb-4"},J={class:"mb-2 text-lg"},K={class:"flex flex-wrap gap-2 mt-2"},q={class:"flex flex-col gap-4 items-start"},H={class:"text-gray-700 leading-relaxed w-full"},Q={class:"mb-6"},X={class:"flex flex-col gap-4"},Y={class:"font-bold"},Z={class:"text-gray-800"},ee={class:"flex items-center justify-end mt-2"},se=["onClick"],te={class:"ml-1"},ae={key:1},ie={__name:"StoryDetail",props:{id:String},setup(v){const b=v,a=_(L.find(i=>i.id===parseInt(b.id))),f=w(()=>{if(!a.value)return{};const i=a.value.img_url||"CS_school.png";try{return{backgroundImage:`url(${new URL(Object.assign({"../assets/images/CS.jpg":V,"../assets/images/CS_map_Filled.png":z,"../assets/images/CS_school.png":F,"../assets/images/data-bg.jpg":I,"../assets/images/owl-body.png":T,"../assets/images/sdgs-bg.jpg":$,"../assets/images/sign.png":P,"../assets/images/story-bg.webp":A})[`../assets/images/${i}`],import.meta.url).href})`}}catch(s){return console.error(s),{backgroundImage:`url(${new URL("/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",import.meta.url).href})`}}}),u={name:"我"},r=_(""),c=_([{id:1,author:"小明",text:"這篇文章真棒！",likes:5,liked:!1},{id:2,author:"我",text:"寫得很好，學到很多。",likes:2,liked:!0}]),x=()=>{r.value.trim()!==""&&(c.value.unshift({id:Date.now(),author:u.name,text:r.value,likes:0,liked:!1}),r.value="")},h=i=>{const s=c.value.find(d=>d.id===i);s&&(s.liked?s.likes--:s.likes++,s.liked=!s.liked)},k=()=>{navigator.share?navigator.share({title:a.value.title,text:a.value.intro,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼簿！"))};return(i,s)=>{const d=D("router-link");return n(),o("main",M,[e("nav",O,[y(d,{to:"/story",class:"bg-white rounded-md px-8 py-3"},{default:S(()=>[...s[1]||(s[1]=[C("回上頁",-1)])]),_:1})]),a.value?(n(),o("section",R,[e("div",{style:j(f.value),class:"relative bg-cover bg-center bg-opacity-70 p-7 rounded-md md:h-80 grid grid-cols-1 content-end overflow-hidden"},[s[2]||(s[2]=e("div",{class:"absolute inset-0 bg-black/40"},null,-1)),e("div",W,[e("h1",E,l(a.value.title),1),e("p",J,l(a.value.intro),1),e("small",null,l(new Date(a.value.time*1e3).toLocaleDateString()),1),e("div",K,[(n(!0),o(g,null,p(a.value.types,t=>(n(),o("span",{key:t,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},l(B(N)[t].title),1))),128))])])],4),e("section",q,[e("button",{onClick:k,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 self-end"}," 分享 "),e("p",H,l(a.value.description),1)]),e("section",null,[s[3]||(s[3]=e("h2",{class:"text-2xl font-bold mb-4"},"留言板",-1)),e("div",Q,[U(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),class:"w-full p-2 border rounded-md",rows:"3",placeholder:"在這裡寫下你的留言..."},null,512),[[G,r.value]]),e("button",{onClick:x,class:"mt-2 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," 發布留言 ")]),e("div",X,[(n(!0),o(g,null,p(c.value,t=>(n(),o("div",{key:t.id,class:m(["p-4 rounded-md",t.author===u.name?"bg-green-100":"bg-gray-100"])},[e("p",Y,l(t.author),1),e("p",Z,l(t.text),1),e("div",ee,[e("button",{onClick:le=>h(t.id),class:"text-gray-500 hover:text-red-500"},[e("i",{class:m(["fa-heart",t.liked?"fa-solid text-red-500":"fa-regular"])},null,2),e("span",te,l(t.likes),1)],8,se)])],2))),128))])])])):(n(),o("div",ae,[...s[4]||(s[4]=[e("p",null,"找不到這篇故事。",-1)])]))])}}};export{ie as default};
