import{e as n,r as p,c as m,b as s,f as g,w as I,g as j,F as _,h as E,t as r,k as S,d as f}from"./index-KhGJz_Q8.js";import{i}from"./ChungShan-D1MM_gpy.js";import{t as B}from"./SDGs_goal-D1XSLY4x.js";import{H as L}from"./HeaderTabs-D65Dc_fo.js";const O="/SDG_campus_v2/assets/story-bg-Cvn6PwaJ.webp",V={class:"pt-30 w-full shadow-md z-10 bg-header"},D={class:"container mx-auto flex items-center p-4"},F={class:"w-1/3"},H={class:"p-10 flex flex-col items-center gap-8 max-w-7xl md:mx-auto"},N={class:"grid grid-cols-1 md:grid-cols-3 gap-5 p-4 md:p-0 md:gap-5"},U=["onClick"],z={class:"p-4 flex flex-col justify-center"},G={class:"text-xl font-bold mb-2"},J={class:"text-gray-600 text-sm"},K={class:"flex justify-center items-center gap-4 mt-8"},M=["disabled"],R=["disabled"],v=6,Y={__name:"Story",setup($){const b=n(()=>{const e={};return B.forEach(t=>{e[t.value]=0}),i.forEach(t=>{t.types.forEach(a=>{e.hasOwnProperty(a)&&e[a]++})}),e.hasOwnProperty(0)&&(e[0]=i.length),e}),d=p(0),c=p(""),o=p(1),h=e=>{d.value=e,o.value=1},y=e=>{c.value=e,o.value=1},x=n(()=>{let e=i;return d.value!==0&&(e=i.filter(t=>t.types.indexOf(d.value)!==-1)),c.value.trim()!==""&&(e=e.filter(t=>t.title.toLowerCase().includes(c.value.trim().toLowerCase()))),e}),u=n(()=>Math.ceil(x.value.length/v)),w=n(()=>{const e=(o.value-1)*v,t=e+v;return x.value.slice(e,t)}),k=()=>{o.value<u.value&&o.value++},C=()=>{o.value>1&&o.value--},P=S(),T=e=>{P.push({name:"story-detail",params:{id:e}})};return(e,t)=>{const a=j("router-link");return f(),m(_,null,[s("header",V,[s("div",D,[s("div",F,[g(a,{to:"/sdgs",class:"back-home-btn"},{default:I(()=>[...t[0]||(t[0]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),t[1]||(t[1]=s("div",{class:"w-1/3 text-center"},[s("h1",{class:"text-2xl md:text-3xl font-bold"},"故事牆")],-1)),t[2]||(t[2]=s("div",{class:"w-1/3"},null,-1))])]),s("main",H,[g(L,{"onUpdate:visibilityTab":h,"onUpdate:keyword":y,counts:b.value,class:"md:mx-auto flex flex-row justify-between items-center w-full"},null,8,["counts"]),s("section",N,[(f(!0),m(_,null,E(w.value,l=>(f(),m("div",{class:"animate-fade-in-up cursor-pointer w-full md:mx-auto min-h-80 bg-white rounded-xl shadow-md overflow-hidden flex flex-col gap-5 hover:scale-105",key:l.id,onClick:q=>T(l.id)},[t[4]||(t[4]=s("img",{src:O,alt:"Card Image",class:"h-45 object-cover"},null,-1)),s("div",z,[s("h2",G,r(l.title),1),s("p",J,r(l.intro),1),t[3]||(t[3]=s("p",{class:"text-gray-600 text-sm text-right pe-3"},"更多",-1))])],8,U))),128))]),s("div",K,[s("button",{onClick:C,disabled:o.value===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,M),s("span",null,"第 "+r(o.value)+" / "+r(u.value)+" 頁",1),s("button",{onClick:k,disabled:o.value===u.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,R)])])],64)}}};export{Y as default};
