import{r as _,e as w,c as o,b as e,f as y,w as S,g as C,n as D,t as a,F as u,h as p,s as j,v as U,d as n,u as G,j as m}from"./index-B38kLtjR.js";import{i as B,t as L}from"./ChungShan-IxIyL9YM.js";const z="/SDG_campus_v2/assets/CS-B4U9TKzs.jpg",F="/SDG_campus_v2/assets/CS_map_Filled-CW6tij6-.png",I="/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",N="/SDG_campus_v2/assets/data-bg-CN9u9Li9.jpg",V="/SDG_campus_v2/assets/owl-body-uleOgCxU.png",T="/SDG_campus_v2/assets/sdgs-bg-m_h1VVFS.jpg",$="/SDG_campus_v2/assets/sign-Ddj-MgxW.png",P="/SDG_campus_v2/assets/story-bg-Cvn6PwaJ.webp",A={class:"pt-30 w-full z-10"},M={class:"container mx-auto flex items-center p-4"},O={class:"w-1/3"},R={class:"max-w-4xl mx-auto p-4"},W={key:0,class:"animate-fade-in-up flex flex-col gap-8"},E={class:"relative z-10 text-white"},J={class:"text-4xl font-bold mb-4"},K={class:"mb-2 text-lg"},q={class:"flex flex-wrap gap-2 mt-2"},H={class:"flex flex-col gap-4 items-start"},Q={class:"text-gray-700 leading-relaxed w-full"},X={class:"mb-6"},Y={class:"flex flex-col gap-4"},Z={class:"font-bold"},ee={class:"text-gray-800"},se={class:"flex items-center justify-end mt-2"},te=["onClick"],le={class:"ml-1"},ae={key:1},re={__name:"StoryDetail",props:{id:String},setup(v){const b=v,l=_(B.find(i=>i.id===parseInt(b.id))),f=w(()=>{if(!l.value)return{};const i=l.value.img_url||"CS_school.png";try{return{backgroundImage:`url(${new URL(Object.assign({"../assets/images/CS.jpg":z,"../assets/images/CS_map_Filled.png":F,"../assets/images/CS_school.png":I,"../assets/images/data-bg.jpg":N,"../assets/images/owl-body.png":V,"../assets/images/sdgs-bg.jpg":T,"../assets/images/sign.png":$,"../assets/images/story-bg.webp":P})[`../assets/images/${i}`],import.meta.url).href})`}}catch(s){return console.error(s),{backgroundImage:`url(${new URL("/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",import.meta.url).href})`}}}),g={name:"我"},r=_(""),c=_([{id:1,author:"小明",text:"這篇文章真棒！",likes:5,liked:!1},{id:2,author:"我",text:"寫得很好，學到很多。",likes:2,liked:!0}]),x=()=>{r.value.trim()!==""&&(c.value.unshift({id:Date.now(),author:g.name,text:r.value,likes:0,liked:!1}),r.value="")},h=i=>{const s=c.value.find(d=>d.id===i);s&&(s.liked?s.likes--:s.likes++,s.liked=!s.liked)},k=()=>{navigator.share?navigator.share({title:l.value.title,text:l.value.intro,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼簿！"))};return(i,s)=>{const d=C("router-link");return n(),o(u,null,[e("header",A,[e("div",M,[e("div",O,[y(d,{to:"/story",class:"back-home-btn"},{default:S(()=>[...s[1]||(s[1]=[e("span",{class:"text"},"回上頁",-1),e("span",{class:"icon"},"←",-1)])]),_:1})]),s[2]||(s[2]=e("div",{class:"w-1/3 text-center"},null,-1)),s[3]||(s[3]=e("div",{class:"w-1/3"},null,-1))])]),e("main",R,[l.value?(n(),o("section",W,[e("div",{style:D(f.value),class:"relative bg-cover bg-center bg-opacity-70 p-7 rounded-md md:h-80 grid grid-cols-1 content-end overflow-hidden"},[s[4]||(s[4]=e("div",{class:"absolute inset-0 bg-black/40"},null,-1)),e("div",E,[e("h1",J,a(l.value.title),1),e("p",K,a(l.value.intro),1),e("small",null,a(new Date(l.value.time*1e3).toLocaleDateString()),1),e("div",q,[(n(!0),o(u,null,p(l.value.types,t=>(n(),o("span",{key:t,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},a(G(L)[t].title),1))),128))])])],4),e("section",H,[e("button",{onClick:k,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 self-end"}," 分享 "),e("p",Q,a(l.value.description),1)]),e("section",null,[s[5]||(s[5]=e("h2",{class:"text-2xl font-bold mb-4"},"留言板",-1)),e("div",X,[j(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),class:"w-full p-2 border rounded-md",rows:"3",placeholder:"在這裡寫下你的留言..."},null,512),[[U,r.value]]),e("button",{onClick:x,class:"mt-2 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," 發布留言 ")]),e("div",Y,[(n(!0),o(u,null,p(c.value,t=>(n(),o("div",{key:t.id,class:m(["p-4 rounded-md",t.author===g.name?"bg-green-100":"bg-gray-100"])},[e("p",Z,a(t.author),1),e("p",ee,a(t.text),1),e("div",se,[e("button",{onClick:oe=>h(t.id),class:"text-gray-500 hover:text-red-500"},[e("i",{class:m(["fa-heart",t.liked?"fa-solid text-red-500":"fa-regular"])},null,2),e("span",le,a(t.likes),1)],8,te)])],2))),128))])])])):(n(),o("div",ae,[...s[6]||(s[6]=[e("p",null,"找不到這篇故事。",-1)])]))])],64)}}};export{re as default};
