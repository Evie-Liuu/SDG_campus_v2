import{r as c,e as w,c as o,b as s,f as S,w as y,g as C,n as D,t as l,F as g,h as p,q as j,x as G,d as n,u as U,j as m}from"./index-DHWiWZ4S.js";import{i as B}from"./ChungShan-D1MM_gpy.js";import{t as L}from"./SDGs_goal-D1XSLY4x.js";const I="/SDG_campus_v2/assets/CS-B4U9TKzs.jpg",V="/SDG_campus_v2/assets/CS_map_Filled-CW6tij6-.png",z="/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",F="/SDG_campus_v2/assets/about-bg-BtAS1pIa.jpg",N="/SDG_campus_v2/assets/data-bg-CN9u9Li9.jpg",T="/SDG_campus_v2/assets/data-bg-V8Z0WOJX.png",$="/SDG_campus_v2/assets/owl-body-uleOgCxU.png",A="/SDG_campus_v2/assets/resource-bg-CLH3yThJ.png",J="/SDG_campus_v2/assets/sdgs-bg-m_h1VVFS.jpg",O="/SDG_campus_v2/assets/sign-Ddj-MgxW.png",P="/SDG_campus_v2/assets/story-bg-Cvn6PwaJ.webp",W={class:"pt-30 w-full z-10 shadow-md bg-header"},M={class:"container mx-auto flex items-center p-4"},R={class:"w-1/3"},q={class:"max-w-4xl mx-auto p-4 pt-10"},E={key:0,class:"animate-fade-in-up flex flex-col gap-8"},H={class:"relative z-10 text-white"},K={class:"text-4xl font-bold mb-4"},X={class:"mb-2 text-lg"},Z={class:"flex flex-wrap gap-2 mt-2"},Q={class:"flex flex-col gap-4 items-start"},Y={class:"text-gray-700 leading-relaxed w-full"},ss={class:"mb-6"},es={class:"flex flex-col gap-4"},ts={class:"font-bold"},as={class:"text-gray-800"},ls={class:"flex items-center justify-end mt-2"},os=["onClick"],ns={class:"ml-1"},is={key:1},gs={__name:"StoryDetail",props:{id:String},setup(b){const v=b,a=c(B.find(i=>i.id===parseInt(v.id))),f=w(()=>{if(!a.value)return{};const i=a.value.img_url||"CS_school.png";try{return{backgroundImage:`url(${new URL(Object.assign({"../assets/images/CS.jpg":I,"../assets/images/CS_map_Filled.png":V,"../assets/images/CS_school.png":z,"../assets/images/about-bg.jpg":F,"../assets/images/data-bg.jpg":N,"../assets/images/data-bg.png":T,"../assets/images/owl-body.png":$,"../assets/images/resource-bg.png":A,"../assets/images/sdgs-bg.jpg":J,"../assets/images/sign.png":O,"../assets/images/story-bg.webp":P})[`../assets/images/${i}`],import.meta.url).href})`}}catch(e){return console.error(e),{backgroundImage:`url(${new URL("/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",import.meta.url).href})`}}}),u={name:"我"},r=c(""),d=c([{id:1,author:"小明",text:"這篇文章真棒！",likes:5,liked:!1},{id:2,author:"我",text:"寫得很好，學到很多。",likes:2,liked:!0}]),x=()=>{r.value.trim()!==""&&(d.value.unshift({id:Date.now(),author:u.name,text:r.value,likes:0,liked:!1}),r.value="")},h=i=>{const e=d.value.find(_=>_.id===i);e&&(e.liked?e.likes--:e.likes++,e.liked=!e.liked)},k=()=>{navigator.share?navigator.share({title:a.value.title,text:a.value.intro,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼簿！"))};return(i,e)=>{const _=C("router-link");return n(),o(g,null,[s("header",W,[s("div",M,[s("div",R,[S(_,{to:"/story",class:"back-home-btn"},{default:y(()=>[...e[1]||(e[1]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=s("div",{class:"w-1/3 text-center"},null,-1)),e[3]||(e[3]=s("div",{class:"w-1/3"},null,-1))])]),s("main",q,[a.value?(n(),o("section",E,[s("div",{style:D(f.value),class:"relative bg-cover bg-center bg-opacity-70 p-7 rounded-md md:h-80 grid grid-cols-1 content-end overflow-hidden"},[e[4]||(e[4]=s("div",{class:"absolute inset-0 bg-black/40"},null,-1)),s("div",H,[s("h1",K,l(a.value.title),1),s("p",X,l(a.value.intro),1),s("small",null,l(new Date(a.value.time*1e3).toLocaleDateString()),1),s("div",Z,[(n(!0),o(g,null,p(a.value.types,t=>(n(),o("span",{key:t,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},l(U(L)[t].title),1))),128))])])],4),s("section",Q,[s("button",{onClick:k,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 self-end"}," 分享 "),s("p",Y,l(a.value.description),1)]),s("section",null,[e[5]||(e[5]=s("h2",{class:"text-2xl font-bold mb-4"},"留言板",-1)),s("div",ss,[j(s("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),class:"w-full p-2 border rounded-md",rows:"3",placeholder:"在這裡寫下你的留言..."},null,512),[[G,r.value]]),s("button",{onClick:x,class:"mt-2 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," 發布留言 ")]),s("div",es,[(n(!0),o(g,null,p(d.value,t=>(n(),o("div",{key:t.id,class:m(["p-4 rounded-md",t.author===u.name?"bg-green-100":"bg-gray-100"])},[s("p",ts,l(t.author),1),s("p",as,l(t.text),1),s("div",ls,[s("button",{onClick:rs=>h(t.id),class:"text-gray-500 hover:text-red-500"},[s("i",{class:m(["fa-heart",t.liked?"fa-solid text-red-500":"fa-regular"])},null,2),s("span",ns,l(t.likes),1)],8,os)])],2))),128))])])])):(n(),o("div",is,[...e[6]||(e[6]=[s("p",null,"找不到這篇故事。",-1)])]))])],64)}}};export{gs as default};
