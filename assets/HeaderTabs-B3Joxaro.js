import{_ as E,r as u,e as S,l as $,o as D,m as U,p as q,c as o,d as r,b as s,q as j,v as F,F as g,h as C,a as _,s as m,f as I,w as O,x as A,T as G,t as W,j as J}from"./index-DvLbxikC.js";import{t as K}from"./SDGs_goal-D1XSLY4x.js";const P={class:"md:hidden relative flex-grow"},Q=["value"],R=["onClick","innerHTML"],X={key:0,class:"relative group flex-shrink-0"},Y={class:"absolute z-10 top-7 left-1 bg-white shadow rounded hidden group-hover:block"},Z=["onClick","innerHTML"],ee={__name:"HeaderTabs",props:{counts:{type:Object,default:()=>({})}},emits:["update:visibilityTab","update:keyword"],setup(z,{emit:B}){const n=z,v=u(K),i=u(v.value[0].value),w=S(()=>{if(!n.counts||Object.keys(n.counts).length===0)return v.value;const a=v.value.find(l=>l.value===0),t=v.value.filter(l=>l.value!==0);t.sort((l,d)=>(n.counts[d.value]||0)-(n.counts[l.value]||0));const e=[];return a&&e.push(a),e.push(...t),e}),x=u(!0),c=u(""),p=u(null),H=u(null),y=u([]),b=u([]),L=B;$(i,a=>{const t=Number(a);L("update:visibilityTab",t)}),$(c,a=>{L("update:keyword",a)});const k=()=>{if(!p.value||!H.value)return;const a=p.value.parentNode;if(!a)return;const t=a.clientWidth-20,e=350;let l=0;const d=[],f=[],M=p.value.querySelectorAll("li:not(.relative)");if(M.forEach((h,N)=>{const T=w.value[N];if(!T)return;const V=h.offsetWidth;l+V<t-e?(l+=V,d.push(T)):f.push(T)}),f.length===1){const h=M[d.length];h&&l+h.offsetWidth<t&&d.push(f.shift())}y.value=d,b.value=f};return D(()=>{y.value=[...w.value],U(()=>{k(),window.addEventListener("resize",k)})}),q(()=>{window.removeEventListener("resize",k)}),(a,t)=>(r(),o(g,null,[s("div",P,[j(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),class:"w-full p-2 border rounded-md appearance-none bg-white text-xl"},[(r(!0),o(g,null,C(w.value,e=>(r(),o("option",{key:e.value,value:e.value},W(e.title.replace(/<br\s*\/?>/g,""))+" "+W(n.counts&&n.counts[e.value]!==void 0?`(${n.counts[e.value]})`:""),9,Q))),128))],512),[[F,i.value]]),t[5]||(t[5]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))]),s("ul",{ref_key:"tabContainer",ref:p,class:"hidden md:flex flex-row items-center justify-center gap-5 h-10 flex-grow text-xl"},[(r(!0),o(g,null,C(y.value,e=>(r(),o("li",{key:e.value,class:"flex-shrink-0 h-full flex items-center"},[s("a",{href:"",class:J([{active:i.value==e.value},"hover:bg-green-200 rounded p-2 px-3 whitespace-nowrap"]),onClick:m(l=>i.value=e.value,["prevent"]),innerHTML:e.title+(n.counts&&n.counts[e.value]!==void 0?` <span class='text-gray-500'>(${n.counts[e.value]})</span>`:"")},null,10,R)]))),128)),b.value.length?(r(),o("li",X,[s("a",{href:"#",onClick:t[1]||(t[1]=m(()=>{},["prevent"])),class:"h-full cursor-pointer hover:bg-green-200 rounded p-2 px-3"},"更多 ▾"),s("ul",Y,[(r(!0),o(g,null,C(b.value,e=>(r(),o("li",{key:e.value},[s("a",{href:"",class:"block px-4 py-2 bg-gray-100 hover:bg-green-200 whitespace-nowrap rounded",onClick:m(l=>i.value=e.value,["prevent"]),innerHTML:e.title+(n.counts&&n.counts[e.value]!==void 0?` <span class='text-gray-500'>(${n.counts[e.value]})</span>`:"")},null,8,Z)]))),128))])])):_("",!0)],512),s("div",{ref_key:"rightTools",ref:H,class:"relative flex items-center w-full justify-center md:justify-end md:pe-10"},[s("button",{onClick:t[2]||(t[2]=e=>x.value=!0),class:"p-2"},[...t[6]||(t[6]=[s("i",{class:"fa-solid fa-magnifying-glass text-2xl"},null,-1)])]),I(G,{name:"fade"},{default:O(()=>[x.value?j((r(),o("input",{key:0,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),type:"text",placeholder:"搜尋標題...",class:"border rounded px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400 transition w-57 md:w-40"},null,512)),[[A,c.value]]):_("",!0)]),_:1}),x.value&c.value.length?(r(),o("a",{key:0,href:"#",class:"absolute right-2",onClick:t[4]||(t[4]=m(e=>c.value="",["prevent"]))},[...t[7]||(t[7]=[s("i",{class:"fa-solid fa-xmark text-gray-400"},null,-1)])])):_("",!0)],512)],64))}},ne=E(ee,[["__scopeId","data-v-2b0859d6"]]);export{ne as H};
