import{r as _,e as w,c as o,b as s,f as y,w as S,g as C,n as D,t as l,F as u,h as p,q as j,x as G,d as n,u as U,j as m}from"./index-BWIWOmsI.js";import{i as B}from"./ChungShan-D1MM_gpy.js";import{t as I}from"./SDGs_goal-D1XSLY4x.js";const L="/SDG_campus_v2/assets/CS-B4U9TKzs.jpg",z="/SDG_campus_v2/assets/CS_map_Filled-CW6tij6-.png",F="/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",N="/SDG_campus_v2/assets/about-bg-BtAS1pIa.jpg",V="/SDG_campus_v2/assets/data-bg-CN9u9Li9.jpg",T="/SDG_campus_v2/assets/owl-body-uleOgCxU.png",$="/SDG_campus_v2/assets/sdgs-bg-m_h1VVFS.jpg",A="/SDG_campus_v2/assets/sign-Ddj-MgxW.png",P="/SDG_campus_v2/assets/story-bg-Cvn6PwaJ.webp",M={class:"pt-30 w-full z-10"},O={class:"container mx-auto flex items-center p-4"},R={class:"w-1/3"},W={class:"max-w-4xl mx-auto p-4"},q={key:0,class:"animate-fade-in-up flex flex-col gap-8"},E={class:"relative z-10 text-white"},J={class:"text-4xl font-bold mb-4"},K={class:"mb-2 text-lg"},H={class:"flex flex-wrap gap-2 mt-2"},Q={class:"flex flex-col gap-4 items-start"},X={class:"text-gray-700 leading-relaxed w-full"},Y={class:"mb-6"},Z={class:"flex flex-col gap-4"},ss={class:"font-bold"},es={class:"text-gray-800"},ts={class:"flex items-center justify-end mt-2"},as=["onClick"],ls={class:"ml-1"},os={key:1},cs={__name:"StoryDetail",props:{id:String},setup(v){const b=v,a=_(B.find(i=>i.id===parseInt(b.id))),f=w(()=>{if(!a.value)return{};const i=a.value.img_url||"CS_school.png";try{return{backgroundImage:`url(${new URL(Object.assign({"../assets/images/CS.jpg":L,"../assets/images/CS_map_Filled.png":z,"../assets/images/CS_school.png":F,"../assets/images/about-bg.jpg":N,"../assets/images/data-bg.jpg":V,"../assets/images/owl-body.png":T,"../assets/images/sdgs-bg.jpg":$,"../assets/images/sign.png":A,"../assets/images/story-bg.webp":P})[`../assets/images/${i}`],import.meta.url).href})`}}catch(e){return console.error(e),{backgroundImage:`url(${new URL("/SDG_campus_v2/assets/CS_school-Bn0PNbfA.png",import.meta.url).href})`}}}),g={name:"我"},r=_(""),c=_([{id:1,author:"小明",text:"這篇文章真棒！",likes:5,liked:!1},{id:2,author:"我",text:"寫得很好，學到很多。",likes:2,liked:!0}]),x=()=>{r.value.trim()!==""&&(c.value.unshift({id:Date.now(),author:g.name,text:r.value,likes:0,liked:!1}),r.value="")},h=i=>{const e=c.value.find(d=>d.id===i);e&&(e.liked?e.likes--:e.likes++,e.liked=!e.liked)},k=()=>{navigator.share?navigator.share({title:a.value.title,text:a.value.intro,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼簿！"))};return(i,e)=>{const d=C("router-link");return n(),o(u,null,[s("header",M,[s("div",O,[s("div",R,[y(d,{to:"/story",class:"back-home-btn"},{default:S(()=>[...e[1]||(e[1]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=s("div",{class:"w-1/3 text-center"},null,-1)),e[3]||(e[3]=s("div",{class:"w-1/3"},null,-1))])]),s("main",W,[a.value?(n(),o("section",q,[s("div",{style:D(f.value),class:"relative bg-cover bg-center bg-opacity-70 p-7 rounded-md md:h-80 grid grid-cols-1 content-end overflow-hidden"},[e[4]||(e[4]=s("div",{class:"absolute inset-0 bg-black/40"},null,-1)),s("div",E,[s("h1",J,l(a.value.title),1),s("p",K,l(a.value.intro),1),s("small",null,l(new Date(a.value.time*1e3).toLocaleDateString()),1),s("div",H,[(n(!0),o(u,null,p(a.value.types,t=>(n(),o("span",{key:t,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},l(U(I)[t].title),1))),128))])])],4),s("section",Q,[s("button",{onClick:k,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 self-end"}," 分享 "),s("p",X,l(a.value.description),1)]),s("section",null,[e[5]||(e[5]=s("h2",{class:"text-2xl font-bold mb-4"},"留言板",-1)),s("div",Y,[j(s("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),class:"w-full p-2 border rounded-md",rows:"3",placeholder:"在這裡寫下你的留言..."},null,512),[[G,r.value]]),s("button",{onClick:x,class:"mt-2 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," 發布留言 ")]),s("div",Z,[(n(!0),o(u,null,p(c.value,t=>(n(),o("div",{key:t.id,class:m(["p-4 rounded-md",t.author===g.name?"bg-green-100":"bg-gray-100"])},[s("p",ss,l(t.author),1),s("p",es,l(t.text),1),s("div",ts,[s("button",{onClick:ns=>h(t.id),class:"text-gray-500 hover:text-red-500"},[s("i",{class:m(["fa-heart",t.liked?"fa-solid text-red-500":"fa-regular"])},null,2),s("span",ls,l(t.likes),1)],8,as)])],2))),128))])])])):(n(),o("div",os,[...e[6]||(e[6]=[s("p",null,"找不到這篇故事。",-1)])]))])],64)}}};export{cs as default};
